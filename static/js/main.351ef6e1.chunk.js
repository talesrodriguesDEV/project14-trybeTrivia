(this["webpackJsonptrivia-react-redux"]=this["webpackJsonptrivia-react-redux"]||[]).push([[0],{32:function(e,t,a){e.exports=a(49)},42:function(e,t){},43:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),o=a.n(c),s=a(9),i=a(23),l=a(2),u=a(12),m=a.n(u),p=a(13),d=a(20),b=a(7),h=a(8),f=a(11),v=a(10);function g(){return y.apply(this,arguments)}function y(){return(y=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://opentdb.com/api_token.php?command=request");case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,localStorage.setItem("token",a.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function E(e){return O.apply(this,arguments)}function O(){return(O=Object(p.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://opentdb.com/api.php?amount=5&token=".concat(t));case 3:if(a=e.sent,"INVALID_TOKEN"!==t){e.next=6;break}return e.abrupt("return","invalid");case 6:return e.next=8,a.json();case 8:return n=e.sent,e.abrupt("return",n.results);case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}var k=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:"",email:""},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(d.a)({},n,r))},e.isButtonDisabled=function(){var t=e.state,a=t.name,n=t.email;return!(/\S+@\S+\.\S+/.test(n)&&a.length>0)},e.handleSubmit=function(){var t=Object(p.a)(m.a.mark((function t(a){var n,r,c,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,g();case 3:n=e.props,r=n.history,c=n.login,o=e.state.name,c(e.state),localStorage.setItem("playerName",o),r.push("/game");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit,className:"login-container"},r.a.createElement("h1",null,"Let's play Trivia!"),r.a.createElement("label",{htmlFor:"input-player-name"},r.a.createElement("input",{type:"text","data-testid":"input-player-name",id:"input-player-name",onChange:this.handleChange,name:"name",placeholder:"Name",className:"form-control"})),r.a.createElement("label",{htmlFor:"input-player-email"},r.a.createElement("input",{type:"email","data-testid":"input-gravatar-email",id:"input-player-email",onChange:this.handleChange,name:"email",placeholder:"Email",className:"form-control"})),r.a.createElement("button",{type:"submit","data-testid":"btn-play",disabled:this.isButtonDisabled(),className:"btn btn-primary"},"Play"))}}]),a}(r.a.Component),j=Object(s.b)(null,(function(e){return{login:function(t){return e(function(e){return{type:"LOGIN",payload:e}}(t))}}}))(k),N=a(21),S=a(28),x=a.n(S),w=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props,t=e.gravatarEmail,a=e.name,n=e.score,c=localStorage.getItem("playerName");return r.a.createElement("div",{className:"header"},r.a.createElement("img",{src:"https://www.gravatar.com/avatar/".concat(x()(t).toString()),alt:"gravatar","data-testid":"header-profile-picture"}),r.a.createElement("p",{"data-testid":"header-player-name",id:"header-player-name"},a||c),r.a.createElement("p",{"data-testid":"header-score"},"You've got"," ",r.a.createElement("span",null,n)," ","points so far!"))}}]),a}(r.a.Component),I=Object(s.b)((function(e){return{gravatarEmail:e.player.gravatarEmail,name:e.player.name,score:e.player.score}}))(w),A=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={timer:30,interval:0,nextButtonEnabled:!1,secInterval:0},e.decreaseTime=function(){e.state.timer>0&&e.setState((function(e){return{timer:e.timer-1}}))},e.sumScore=function(t){var a;return"hard"===t?a=3:"medium"===t?a=2:"easy"===t&&(a=1),10+e.state.timer*a},e.setNewQuestionTimer=function(){var t=e.props.changeQuestion,a=e.state.interval;clearInterval(a);var n=setInterval(t,3e4);e.setState({timer:30,interval:n})},e.handleClick=function(t,a,n){var r=e.props,c=r.changeQuestion,o=r.addScore;"correct-answer"===a&&o(e.sumScore(n)),c(t),e.setState({nextButtonEnabled:!0})},e.handleNext=function(){var t=e.props,a=t.nextQuestion,n=t.currentQuestionIndex,r=t.history;e.setNewQuestionTimer(),a(),e.setState({nextButtonEnabled:!1});4===n&&r.push("/feedback")},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.changeQuestion,t=setInterval(e,3e4),a=setInterval(this.decreaseTime,1e3);this.setState({interval:t,secInterval:a})}},{key:"componentWillUnmount",value:function(){var e=this.state,t=e.interval,a=e.secInterval;clearInterval(t),clearInterval(a)}},{key:"render",value:function(){var e=this,t=this.props,a=t.question,n=t.allAnswers,c=this.state,o=c.timer,s=c.nextButtonEnabled,i=0;return r.a.createElement("div",{className:"question-container"},r.a.createElement("p",{"data-testid":"timer"},"You've got"," ",r.a.createElement("span",{className:"timer"},o)," ","seconds left!"),r.a.createElement("p",{"data-testid":"question-category"},"Question Theme:"," ",r.a.createElement("span",{className:"theme"},a.category)),r.a.createElement("p",{"data-testid":"question-text"},a.question.replace(/&quot;/g,"'").replace(/&#039;/g,"'")),r.a.createElement("div",{"data-testid":"answer-options",className:"answers"},n.map((function(t){var n="";return t===a.correct_answer?n="correct-answer":(n="wrong-answer-".concat(i),i+=1),r.a.createElement("button",{key:t,type:"button","data-testid":n,onClick:function(t){e.handleClick(t,n,a.difficulty)},className:"".concat(n," btn btn-warning")},t)}))),r.a.createElement("button",{type:"button","data-testid":"btn-next",onClick:this.handleNext,className:"btn btn-primary",disabled:!s||0===o},"Next"))}}]),a}(n.Component),C=Object(s.b)(null,(function(e){return{addScore:function(t){return e(function(e){return{type:"ADD_SCORE",payload:e}}(t))}}}))(A),Q=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={questions:[],currentQuestionIndex:0},e.changeQuestion=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.target;a&&e.setAnswersColors(a),Array.from(document.querySelectorAll("button")).filter((function(e){return"Next"!==e.innerText&&"Play Again"!==e.innerText&&"Ranking"!==e.innerText&&"Play"!==e.innerText})).forEach((function(e){e.disabled=!0}))},e.setAnswersColors=function(e){e.className.includes("correct-answer")?e.style.border="3px solid rgb(6, 240, 15)":e.className.includes("wrong-answer")&&(Array.from(e.parentElement.children).find((function(e){return e.className.includes("correct-answer")})).style.border="3px solid rgb(6, 240, 15)"),Array.from(e.parentElement.children).filter((function(e){return!e.className.includes("correct-answer")})).forEach((function(e){e.style.border="3px solid red"}))},e.nextQuestion=function(t,a){t!==a.length-1&&e.setState((function(e){return{currentQuestionIndex:e.currentQuestionIndex+1}}))},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.history,a=localStorage.getItem("token"),e.next=4,E(a);case 4:"invalid"===(n=e.sent)?t.push("/"):this.setState({questions:n});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.questions,n=t.currentQuestionIndex,c=this.props.history;return r.a.createElement("div",{className:"bigger-container"},r.a.createElement(I,null),0!==a.length&&r.a.createElement(C,{question:a[n],changeQuestion:this.changeQuestion,allAnswers:[].concat(Object(N.a)(a[n].incorrect_answers),[a[n].correct_answer]).sort((function(){return Math.random()-.5})),nextQuestion:function(){return e.nextQuestion(n,a)},currentQuestionIndex:n,history:c}))}}]),a}(n.Component),T=a(16),D=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(b.a)(this,a),(e=t.call(this)).salvaNoStore=e.salvaNoStore.bind(Object(T.a)(e)),e}return Object(h.a)(a,[{key:"salvaNoStore",value:function(){var e=this.props,t=e.score,a=e.gravatarEmail,n=e.name,r={name:n,score:t,picture:a},c=JSON.parse(localStorage.getItem("ranking"));null===c&&""!==n?localStorage.setItem("ranking",JSON.stringify([r])):localStorage.setItem("ranking",JSON.stringify([].concat(Object(N.a)(c),[r])))}},{key:"render",value:function(){var e=this.props,t=e.assertions,a=e.score,n=e.history,c=e.restart;return r.a.createElement("div",{className:"bigger-container"},r.a.createElement(I,null),r.a.createElement("div",{className:"feedback"},r.a.createElement("p",{"data-testid":"feedback-text"},this.salvaNoStore(),t<3?"Could be better...":"Well Done!"),r.a.createElement("p",{"data-testid":"feedback-total-score"},"You made"," ",r.a.createElement("span",null,a)," ","points!"),r.a.createElement("p",{"data-testid":"feedback-total-question"},"And got"," ",r.a.createElement("span",null,t)," ","right!"),r.a.createElement("button",{className:"btn btn-primary",type:"button","data-testid":"btn-play-again",onClick:function(){c(),n.push("/")}},"Play Again"),r.a.createElement("button",{className:"btn btn-warning",type:"button","data-testid":"btn-ranking",onClick:function(){return n.push("/ranking")}},"Ranking")))}}]),a}(r.a.Component),q=Object(s.b)((function(e){return{gravatarEmail:e.player.gravatarEmail,name:e.player.name,assertions:e.player.assertions,score:e.player.score}}),(function(e){return{restart:function(){return e({type:"RESTART_GAME"})}}}))(D),R=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(b.a)(this,a),(e=t.call(this)).carregaDoLocalStore=e.carregaDoLocalStore.bind(Object(T.a)(e)),e}return Object(h.a)(a,[{key:"carregaDoLocalStore",value:function(){return JSON.parse(localStorage.getItem("ranking")).sort((function(e,t){return t.score-e.score}))}},{key:"render",value:function(){var e=this.props,t=e.history,a=e.restart,n=this.carregaDoLocalStore();return r.a.createElement("div",{className:"bigger-container"},r.a.createElement(I,null),r.a.createElement("div",{className:"ranking"},r.a.createElement("h1",{"data-testid":"ranking-title"},"Ranking"),r.a.createElement("table",{className:"table table-dark table-striped table-bordered border-light"},r.a.createElement("thead",{className:"table-light"},r.a.createElement("tr",null,r.a.createElement("th",null,"Rank"),r.a.createElement("th",null,"Player"),r.a.createElement("th",null,"Score"))),r.a.createElement("tbody",{className:"table-group-divider"},n.map((function(e,t){return r.a.createElement("tr",{key:t,className:"rank-card"},r.a.createElement("td",null,t+1),r.a.createElement("td",{"data-testid":"tdlayer-name-".concat(t)},e.name||"Anonymous Player"),r.a.createElement("td",{"data-testid":"player-score-".concat(t)},e.score))})))),r.a.createElement("button",{className:"btn btn-primary",type:"button","data-testid":"btn-go-home",onClick:function(){a(),t.push("/")}},"Play Again")))}}]),a}(r.a.Component),_=Object(s.b)(null,(function(e){return{restart:function(){return e({type:"RESTART_GAME"})}}}))(R);a(43);function L(){return r.a.createElement("div",{className:"App"},r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/",exact:!0,component:j}),r.a.createElement(l.a,{path:"/game",component:Q}),r.a.createElement(l.a,{path:"/feedback",component:q}),r.a.createElement(l.a,{path:"/ranking",component:_})))}var B=a(17),M=a(30),P=a(31),J=a(14),G={name:"",assertions:0,score:0,gravatarEmail:""},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(J.a)(Object(J.a)({},e),{},{name:t.payload.name,gravatarEmail:t.payload.email});case"ADD_SCORE":return Object(J.a)(Object(J.a)({},e),{},{score:e.score+t.payload,assertions:e.assertions+1});case"RESTART_GAME":return Object(J.a)(Object(J.a)({},e),{},{name:"",assertions:0,score:0,gravatarEmail:""});default:return e}},Y=Object(B.combineReducers)({player:W}),F=Object(B.legacy_createStore)(Y,Object(M.composeWithDevTools)(Object(B.applyMiddleware)(P.a)));window.Cypress&&(window.store=F);var K=F;o.a.render(r.a.createElement(i.a,null,r.a.createElement(s.a,{store:K},r.a.createElement(L,null))),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.351ef6e1.chunk.js.map